<source>
  @type           tail
  tag             kubernetes.*
  path            /var/lib/docker/containers/**/*.log
  pos_file        /var/log/containers.log.pos
  read_from_head  true
  format          json
  keep_time_key   true
  time_format     %Y-%m-%dT%H:%M:%S.%N
</source>

<filter kubernetes.**>
  type kubernetes_metadata
</filter>
<filter kubernetes.**>
  type record_transformer
  <record>
    cluster default-cluster-name
  </record>
</filter>
<match **>
  type                elasticsearch
  log_level           info
  include_tag_key     true
  time_key            time
  reload_connections  true
  host                elasticsearch-logging
  port                9200
  scheme              http
  buffer_type         memory
  buffer_chunk_limit  8m
  buffer_queue_limit  8192
  flush_interval      10s
  retry_limit         10
  disable_retry_limit
  retry_wait          1s
  max_retry_wait      60s
  num_threads         1
  logstash_format     true
</match>
